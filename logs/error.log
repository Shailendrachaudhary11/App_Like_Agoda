{"level":"error","message":"[FAVORITES] Error adding guesthouse to favorites for user: 68e3f2b45a2071ee3a1ef369. Error: Cannot access 'favorite' before initialization","stack":"ReferenceError: Cannot access 'favorite' before initialization\n    at exports.addFavorites (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1588:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:01:38"}
{"level":"error","message":"[FAVORITES] Error adding guesthouse to favorites for user: 68e3f2b45a2071ee3a1ef369. Error: Cannot access 'favorite' before initialization","stack":"ReferenceError: Cannot access 'favorite' before initialization\n    at exports.addFavorites (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1588:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:01:39"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:142:54)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:59:25"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:142:54)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:59:29"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:166:57)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:59:45"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:166:57)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 10:59:47"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:196:59)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 11:00:08"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:196:59)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 11:00:10"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:196:59)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 11:01:08"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: guesthouseId is not defined","stack":"ReferenceError: guesthouseId is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:196:59)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 11:02:05"}
{"level":"error","message":"[FAVORITES] Error adding guesthouse to favorites for user: 68e3f2b45a2071ee3a1ef369. Error: Cast to ObjectId failed for value \"{ guesthouseId: '68e3591c1b064c0fbfea94d8' }\" (type Object) at path \"_id\" for model \"Guesthouse\"","stack":"CastError: Cast to ObjectId failed for value \"{ guesthouseId: '68e3591c1b064c0fbfea94d8' }\" (type Object) at path \"_id\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:319:34)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._findOne (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2697:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.addFavorites (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1575:28)","timestamp":"2025-10-09 11:53:36"}
{"level":"error","message":"[FAVORITES] Error adding guesthouse to favorites for user: 68e3f2b45a2071ee3a1ef369. Error: Cast to ObjectId failed for value \"{ guesthouseId: '68e3591c1b064c0fbfea94d8' }\" (type Object) at path \"_id\" for model \"Guesthouse\"","stack":"CastError: Cast to ObjectId failed for value \"{ guesthouseId: '68e3591c1b064c0fbfea94d8' }\" (type Object) at path \"_id\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:319:34)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._findOne (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2697:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.addFavorites (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1575:28)","timestamp":"2025-10-09 11:53:39"}
{"level":"error","message":"[NOTIFICATION] Error deleting notification for customer: 68e3f2b45a2071ee3a1ef369, notificationId: undefined. Error: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.\n    at exports.deleteNotification (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1474:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 12:21:23"}
{"level":"error","message":"[NOTIFICATION] Error deleting notification for customer: 68e3f2b45a2071ee3a1ef369, notificationId: undefined. Error: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.\n    at exports.deleteNotification (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1474:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 12:21:29"}
{"level":"error","message":"[NOTIFICATION] Error deleting notification for customer: 68e3f2b45a2071ee3a1ef369, notificationId: undefined. Error: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.\n    at exports.deleteNotification (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1474:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 12:22:26"}
{"level":"error","message":"[NOTIFICATION] Error deleting notification for customer: 68e3f2b45a2071ee3a1ef369, notificationId: undefined. Error: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.\n    at exports.deleteNotification (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1474:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 12:27:07"}
{"level":"error","message":"[NOTIFICATION] Error deleting notification for customer: 68e3f2b45a2071ee3a1ef369, notificationId: undefined. Error: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'notificationId' of 'req.body' as it is undefined.\n    at exports.deleteNotification (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:1474:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 12:28:08"}
{"level":"error","message":"Internal server error in getAllGuestHouses: ReferenceError: atollIds is not defined\n    at exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:40:36)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 17:51:04"}
{"level":"error","message":"Internal server error in getAllGuestHouses: ReferenceError: mongoose is not defined\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:49:59\n    at Array.map (<anonymous>)\n    at exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:49:49)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 17:52:00"}
{"level":"error","message":"Internal server error in getAllGuestHouses: ReferenceError: mongoose is not defined\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:49:59\n    at Array.map (<anonymous>)\n    at exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:49:49)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-09 17:52:02"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Noonu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 09:46:59"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Noonu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 09:47:11"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Noonu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 09:47:16"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Noonu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 09:47:16"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Noonu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 09:47:16"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Kaafu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 10:02:29"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: guestHouse.toObject is not a function","stack":"TypeError: guestHouse.toObject is not a function\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:167:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-10 10:28:42"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: guestHouse.toObject is not a function","stack":"TypeError: guestHouse.toObject is not a function\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:167:42)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-10 10:28:44"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Kaafu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 10:36:13"}
{"level":"error","message":"Internal server error in getAllGuestHouses: CastError: Cast to ObjectId failed for value \"Kaafu Atoll\" (type string) at path \"atolls\" for model \"Guesthouse\"\n    at SchemaObjectId.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schema\\objectId.js:251:11)\n    at SchemaType.applySetters (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1258:12)\n    at SchemaType.castForQuery (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1694:17)\n    at cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\cast.js:390:32)\n    at Query.cast (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:5060:12)\n    at Query._castConditions (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._find (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2401:8)\n    at model.Query.exec (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:4627:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async exports.getAllGuestHouses (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:72:29)","timestamp":"2025-10-10 10:42:36"}
{"level":"error","message":"[GuestHouse] Error fetching by ID: gh is not defined","stack":"ReferenceError: gh is not defined\n    at exports.getGuestHouseById (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:179:37)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 12:05:21"}
{"level":"error","message":"[PAYMENT] Error processing payment: Cannot destructure property 'bookingId' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'bookingId' of 'req.body' as it is undefined.\n    at exports.payPayment (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:587:17)\n    at Layer.handleRequest (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\router\\lib\\route.js:157:13)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\middlewares\\authMiddleware.js:30:13\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 14:43:32"}
{"level":"error","message":"[BOOKING] Error fetching booking 68e8a913f1dce914ad784038 for customer: 68e3f2b45a2071ee3a1ef369. Error: Cannot populate path `room` because it is not in your schema. Set the `strictPopulate` option to false to override.","stack":"StrictPopulateError: Cannot populate path `room` because it is not in your schema. Set the `strictPopulate` option to false to override.\n    at getModelsMapForPopulate (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\helpers\\populate\\getModelsMapForPopulate.js:50:12)\n    at _populatePath (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\model.js:4466:21)\n    at Function.populate (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\model.js:4433:21)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2654:11\n    at _init (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:3330:5)\n    at Document.init (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:654:5)\n    at Document.$init (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:667:42)\n    at Object.createModelAndInit (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\queryHelpers.js:119:12)\n    at completeOne (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:3308:11)\n    at Query._completeOne (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\query.js:2650:3)","timestamp":"2025-10-13 15:41:44"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3f2b45a2071ee3a1ef369. Error: N is not defined","stack":"ReferenceError: N is not defined\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:807:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:49:21"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3f2b45a2071ee3a1ef369. Error: N is not defined","stack":"ReferenceError: N is not defined\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:807:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:49:23"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3f2b45a2071ee3a1ef369. Error: N is not defined","stack":"ReferenceError: N is not defined\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:807:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:49:32"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3be34c79b984dbf24f29e. Error: Cannot read properties of undefined (reading 'charAt')","stack":"TypeError: Cannot read properties of undefined (reading 'charAt')\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:834:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:53:14"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3be34c79b984dbf24f29e. Error: Cannot read properties of undefined (reading 'charAt')","stack":"TypeError: Cannot read properties of undefined (reading 'charAt')\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:834:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:53:15"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3be34c79b984dbf24f29e. Error: Cannot read properties of undefined (reading 'charAt')","stack":"TypeError: Cannot read properties of undefined (reading 'charAt')\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:837:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:53:33"}
{"level":"error","message":"[BOOKING] Error fetching booking 68ed477838992921b2ea6124 for customer: 68e3be34c79b984dbf24f29e. Error: Cannot read properties of undefined (reading 'charAt')","stack":"TypeError: Cannot read properties of undefined (reading 'charAt')\n    at exports.getBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:837:36)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 16:53:34"}
{"level":"error","message":"[BOOKING] Error cancelling booking 68ed54ff614301ff6a34b637 for customer 68e3f2b45a2071ee3a1ef369. Error: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.cancelBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:911:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 17:41:06"}
{"level":"error","message":"[BOOKING] Error cancelling booking 68ed54ff614301ff6a34b637 for customer 68e3f2b45a2071ee3a1ef369. Error: id is not defined","stack":"ReferenceError: id is not defined\n    at exports.cancelBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:911:45)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 17:41:08"}
{"level":"error","message":"[PAYMENT] Error processing payment: Payment validation failed: paymentMethod: Path `paymentMethod` is required.","stack":"ValidationError: Payment validation failed: paymentMethod: Path `paymentMethod` is required.\n    at Document.invalidate (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-10-13 17:44:35"}
{"level":"error","message":"[PAYMENT] Error processing payment: Payment validation failed: paymentMethod: Path `paymentMethod` is required.","stack":"ValidationError: Payment validation failed: paymentMethod: Path `paymentMethod` is required.\n    at Document.invalidate (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:3358:32)\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\document.js:3119:17\n    at C:\\Users\\HP\\Desktop\\App_Like_Agoda\\node_modules\\mongoose\\lib\\schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-10-13 17:46:08"}
{"level":"error","message":"[Booking] Error creating booking by customer 68e3be34c79b984dbf24f29e: rooms is not defined","stack":"ReferenceError: rooms is not defined\n    at exports.createBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:430:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 17:51:18"}
{"level":"error","message":"[Booking] Error creating booking by customer 68e3be34c79b984dbf24f29e: room.reduce is not a function","stack":"TypeError: room.reduce is not a function\n    at exports.createBooking (C:\\Users\\HP\\Desktop\\App_Like_Agoda\\controller\\customerController.js:430:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-10-13 17:51:39"}
